<div class="le-chat">

  @for (user of chat; track user.name) {
  <div class="user-container" [class.face-left]="user.mirror" style="left:{{ user.xPosition }}; z-index:{{ user.messages[user.messages.length - 1].id }}">

    <div class="messages-container">
      @for (msg of user.messages; track msg.id) {
      <div class="user-message" style="border-color:{{ user.color }}">
        @if (msg.quote) {
        <div class="message-quote" [innerHTML]=msg.quote></div>
        }
        <div class="message-text" [class.message-highlighted]="msg.type == 'highlight'" [class.message-announce]="msg.type == 'announce'" [class.message-notice]="msg.type == 'notice'" [class.message-animated]="msg.type == 'animated'" [innerHTML]=msg.text></div>
        <div class="pointer" style="background: linear-gradient(135deg,rgba(255, 255, 255, 0) 75%, {{ user.color }} 75%);"></div>
      </div>
      }
    </div>

    <div class="user-body" [ngClass]="[user.status]" style="background-color:{{ user.color }}"></div>
    @if (user.badge) {
    <div class="user-badge" [innerHTML]=user.badge></div>
    }
    <div class="user-name" style="color:{{ user.color }}">{{ user.name }}</div>
  </div>
  }

  <div [ngClass]="['hype-train-container', train ? 'arrive' : 'depart']">
    <div class="hype-train">
      <img src="/assets/train_last.gif">
      <img src="/assets/train_door.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_door.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_door.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_door.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_door.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_wagon.gif">
      <img src="/assets/train_loco.gif">
    </div>
    <div class="train-tag"><img src="/assets/train_tag.png"></div>
  </div>

</div>